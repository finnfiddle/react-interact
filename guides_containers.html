<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Interact</title>
    <link rel="stylesheet" href="/react-interact//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">
    <link rel="stylesheet" href="/react-interact/css/main.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header"><a href="/react-interact/" class="navbar-brand">Interact</a></div>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/react-interact/">Home</a></li>
          <li><a href="/react-interact/guides.html">Guides</a></li>
          <li><a href="/react-interact/docs.html">Docs</a></li>
          <li><a href="/react-interact">Github</a></li>
        </ul>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-md-3"><br/><br/>
          <ul>
            <li><a href="/react-interact/guides.html">Getting Started</a></li>
            <li><a href="/react-interact/guides_containers.html">Containers</a></li>
            <li><a href="/react-interact/guides_mutations.html">Mutations</a></li>
            <li><a href="/react-interact/guides_subresources.html">Subresources</a></li>
            <li><a href="/react-interact/guides_custom_interfaces.html">Custom Agents/Interfaces</a></li>
          </ul>
        </div>
        <div class="col-md-9">
          <div class="page-header">
            <h1>Containers</h1>
          </div>
          <p>Containers need to be configured so that they know where and how to send network requests. The second argument to <code>Interact.createContainer()</code> is an object where each key-value pair corresponds to an API resource.</p>
          <p>Example:</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: {
    base: '/api/v1/resourceName', // base uri prepended to all operation uris
    list: {method: 'GET', uri: ''}, // method and uri for listing items
    create: {method: 'POST', uri: ''}, // method and uri for creating an item
    read: {method: 'GET', uri: '/1'}, // method and uri for reading an item
    update: {method: 'PUT', uri: '/1'}, // method and uri for updating an item
    patch: {method: 'PATCH', uri: '/1'}, // method and uri for patching an item
    remove: {method: 'DELETE', uri: '/1'}, // method and uri for removing an item
    headers: {
      Accept: 'application/json',
    },
    defaultOperation: 'list', // operation that is executed when component mounts
    uid: 'id', // unique identifier key for each item
  },
  ...
})
</code></pre><br/><br/>
          <h4>Defaults / URI shorthand</h4>
          <p>Instead of using an object for each operation config (eg. read, list, update) we can choose to only write the URI string. The operations will use the default HTTP verbs for each. The above could have been written like this:</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: {
    base: '/api/v1/resourceName',
    list: '',
    create: '',
    read: '/1',
    update: '/1',
    patch: '/1',
    remove: '/1',
  },
  ...
})
</code></pre><br/><br/>
          <h4>Dynamic URIs</h4>
          <p>Each operation URI on a resource gets evaluated as a template string. The template string gets passed the <code>props</code> of the container and the <code>id</code> for the item when performing a mutation (see the <a href="/guides_mutations.html">Mutations Guide</a>  for more info).</p>
          <p>For example:</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: {
    base: '/api/v1/${props.resourceName}',
    list: '',
    create: '',
    read: '/${id}',
    update: '/${id}',
    patch: '/${id}',
    remove: '/${id}',
  },
  ...
}))
</code></pre>
          <div class="callout callout-warning"> 
            <h4>Warning</h4>
            <p>Notice that the uri template strings for each operation do not use back-ticks like ES6 template strings, but instead use ordinary single or double quotation marks.</p>
            <p>This is so that the template strings can be evaluated when the user wants to send a request, not when the container is created.</p>
          </div><br/><br/>
          <h4>Item keys/URIs</h4>
          <p>In the above example you'll notice that all operations for individual items (eg. update, remove, read, patch) have the same URI. In this case we can simplify our configuration even further by using an <code>item</code> key to configure all of the item operations at the same time.</p>
          <p>For example:</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: {
    base: '/api/v1/${props.resourceName}',
    item: '/${id}',
  },
  ...
})

</code></pre>
          <div class="callout callout-info"> 
            <h4>Info</h4>
            <p>The <code>create</code> and <code>list</code> operations use the base URI by default and can be omitted.</p>
          </div><br/><br/>
          <h4>Resource URIs</h4>
          <p>The previous example can be simplified even further. We can define a resource by only using the base URI string. If we used the following configuration:</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: '/api/v1/${props.resourceName}',
  ...
})

</code></pre>
          <p>It would be equivalent to writing the following:</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: {
    base: '/api/v1/${props.resourceName}',
    list: {method: 'GET', uri: ''},
    read: {method: 'GET', uri: '/${id}'},
    create: {method: 'POST', uri: ''},
    update: {method: 'PUT', uri: '/${id}'},
    patch: {method: 'PATCH', uri: '/${id}'},
    remove: {method: 'DELETE', uri: '/${id}'},
    headers: {},
    defaultOperation: 'list',
    uid: 'id',
  },
  ...
})
</code></pre><br/><br/>
          <h4>Request Headers</h4>
          <p>Headers can be configured per resource. For each request sent it will attach the headers defined in the <code>headers</code> property of the resource.</p>
          <pre><code class="javascript">Interact.createContainer(WrappedComponent, {
  resourceName: {
    base: '/api/v1/resourceName',
    item: '/${id}'
    headers: {
      Accept: 'application/json',
      'Content-Type': 'application/json',
      Authorization: 'my_token',
    },
  },
  ...
})
</code></pre><br/><br/><a href="/react-interact/guides_mutations.html" class="btn btn-md btn-primary">Next: Mutations</a><br/><br/><br/><br/><br/><br/>
        </div>
      </div>
    </div>
  </body>
</html>